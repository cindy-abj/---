# 学员分组 Skill

## 命令用法

```
/学员分组                    # 对指定期数学员进行分组
/学员分组 --期数 第3期        # 指定期数
/学员分组 --组数 6           # 指定分组数量（默认6组）
/学员分组 --检查             # 检查并显示当前CRM中各期学员人数
```

---

## Skill 描述

自动从CRM中提取指定期数的学员信息，按薪资职级进行蛇形分组，确保每组实力均衡。

---

## 数据源

### 问卷表格（获取学员详细信息）
- **app_token**: `J8tUbpEQuad43fsOrKlcVDzPnbg`
- **table_id**: `tblMI36INDUt8Rgg` (⭐️会员信息录入)

### CRM表格（学员管理）
- **app_token**: `UW6Wb2UOWaWglesPTxjcZAMmnPd`
- **table_id**: `tblDYysUaCUxCJwZ` (学员CRM表)

---

## 分组规则

### 核心原则
1. **按薪资职级排序**：从高到低排序（80-100万 → 20万以下）
2. **蛇形分配**：像走"之"字形，确保每组实力均衡
   ```
   第1圈（→）：1→组1, 2→组2, 3→组3, 4→组4, 5→组5, 6→组6
   第2圈（←）：7→组6, 8→组5, 9→组4, 10→组3, 11→组2, 12→组1
   第3圈（→）：13→组1, 14→组2, 15→组3...
   ```
3. **每组6-7人**（总人数÷组数）
4. **前端岗位要求**：每组前2名中至少1人是前端岗位
   - 前端岗位包括：产品经理、运营、市场、销售、创业者
   - 用★标注前端岗位
5. **行业多元性**：尽量保证每组行业分布均衡
6. **特殊要求**：支持指定学员必须在某组或必须同组

---

## 薪资职级排序规则

### 薪资等级（优先级1）
1. 80-100万
2. 60-80万
3. 50-60万
4. 40-50万
5. 30-40万
6. 20-30万
7. 20万以下

### 职级等级（优先级2，同薪资时按此排序）
1. C-level（CEO/COO/CFO等）
2. VP/事业部负责人
3. 总监/高级经理
4. 经理/部门负责人
5. 资深专家（同管理层级）
6. 主管/小组长
7. 准管理层（即将晋升或转管理岗）

---

## 执行步骤

### Step 1: 确认期数和参数
```
询问用户：
- 期数（如：第2期）
- 组数（默认6组）
- 是否有特殊要求（如：某人必须在第1组，某两人必须同组）
```

### Step 2: 从CRM提取学员数据
```javascript
// 查询条件
filter: {
  conditions: [{
    field_name: "所属班级",
    operator: "is",
    value: ["第X期"]
  }],
  conjunction: "and"
}

// 提取字段
- 学员姓名
- 年薪
- 管理层级
- 岗位
- 所在行业
- 公司名称
- 微信号
```

### Step 3: 按薪资职级排序
1. 将学员按薪资分组（80-100万、60-80万...）
2. 同薪资内按职级排序（总监 > 经理 > 主管...）
3. 标注前端岗位（★）
4. 生成排序后的完整列表

### Step 4: 蛇形分配
```python
# 伪代码
sorted_students = 按薪资职级排序后的学员列表
groups = [[] for _ in range(组数)]
direction = 1  # 1=正向，-1=反向

for i, student in enumerate(sorted_students):
    round_num = i // 组数
    if round_num % 2 == 0:  # 偶数圈，正向
        group_index = i % 组数
    else:  # 奇数圈，反向
        group_index = 组数 - 1 - (i % 组数)

    groups[group_index].append(student)
```

### Step 5: 检查并调整
1. **检查前端岗位**：每组前2名至少1人是前端
   - 如不满足，在同薪资级别内调换人员
2. **检查行业分布**：避免某行业在某组过于集中（≥3人）
   - 如有集中，在同薪资级别内调换人员
3. **处理特殊要求**：
   - 指定学员在指定组
   - 指定学员同组
   - 在不破坏整体均衡的前提下调整

### Step 6: 生成分组报告
生成Markdown格式报告，包含：
- 分组总览（各组人数、组长、副组长）
- 详细分组名单（含薪资、职级、岗位、行业）
- 行业分布统计
- 前端岗位分布
- 薪资分布
- 微信群名建议

### Step 7: 保存分组方案
```
保存路径：reports/第X期学员分组方案_YYYY-MM-DD.md
```

---

## 输出格式

### 分组报告结构
```markdown
# 第X期学员分组方案

## 总人数：XX人
**分组方案**：X组（7+7+7+7+7+6）

---

## 第1组（7人）

**组长**: XXX（XX万，职级，岗位，行业）
**副组长**: ★XXX（XX万，职级，岗位，行业）【前端】

**成员**：
1. XXX - XX万 - 职级 - 岗位 - 行业
2. ...

**行业分布**：XX×2、XX、XX...
**前端岗位**：XXX、XXX
**微信群名建议**：XX&XX组

---

## 检查结果

### ✅ 特殊要求
- [x] XXX在第1组
- [x] XXX+XXX在同一组

### ✅ 前端岗位（每组前2名至少1人）
- 第1组：XXX（组长）✓
- 第2组：XXX（副组长）✓
...

### ✅ 行业多元性
- 第1组：XX、XX、XX ✓
...

### 人数统计
- 第1-5组：各7人
- 第6组：6人
- **总计：XX人** ✓
```

---

## 注意事项

1. **薪资隐私**：生成的报告中薪资仅用于内部管理，不对外公开
2. **实时数据**：每次执行都从CRM实时读取，确保数据最新
3. **灵活调整**：分组完成后支持手动微调
4. **前端岗位识别**：
   - 明确的前端岗位：产品经理、运营、市场、销售、创业者
   - 其他岗位如需认定为前端，需人工确认
5. **行业集中阈值**：同一行业在同一组≥3人视为集中，需优化

---

## 常见问题

### Q1: 如果某组没有前端岗位怎么办？
A: 优先在同薪资级别内调换，确保每组前2名至少1人是前端。如薪资差距过大无法调换，会提示用户手动调整。

### Q2: 特殊要求（如A和B必须同组）如何处理？
A: 先按正常规则分组，然后在不破坏整体均衡的前提下调换。如果影响较大，会给出多个备选方案供选择。

### Q3: 如果学员信息不完整怎么办？
A: 会列出信息不完整的学员清单，建议先从问卷补录完整信息后再分组。

### Q4: 分组后能否调整？
A: 可以。分组方案只是建议，可根据实际情况（如学员时间冲突、地域等因素）手动调整。

---

## 版本历史

- **v1.0.0** (2026-01-16)
  - 初始版本
  - 支持蛇形分组
  - 支持前端岗位检查
  - 支持行业多元性优化
  - 支持特殊要求处理

---

## 相关文件

- 分组方案存储：`reports/第X期学员分组方案_YYYY-MM-DD.md`
- 名单核对：`reports/第X期学员名单核对.md`
- CRM数据源：飞书多维表格
